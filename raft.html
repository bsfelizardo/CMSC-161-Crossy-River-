<!doctype html>
<html>
<head>
  <title>WebGL Demo</title>
</head>

<body>
  <canvas id="output" width="1280" height="720"></canvas>

  <!-- VERTEX SHADER -->
  <script id="vertex-shader" type="notjs">#version 300 es
    in vec4 a_position;
    in float a_point_size;

    void main() {
      gl_Position = a_position;
      gl_PointSize = a_point_size;
    } 
  </script>

  <!-- FRAGMENT SHADER -->
  <script id="fragment-shader" type="notjs">#version 300 es
    precision mediump float;

    uniform vec4 u_color;
    out vec4 outColor;

    void main(void) {
      //outColor = vec4(1, 0, 0, 1); //red
    
      outColor = u_color;
    }

    
  </script>

  <!-- Function for creating and compiling shader programs -->
  <script>
  function createShader (gl, type, sourceCode) {
  // Compiles either a shader of type gl.VERTEX_SHADER or gl.FRAGMENT_SHADER
  var shader = gl.createShader( type );
  gl.shaderSource( shader, sourceCode );
  gl.compileShader( shader );

  if ( !gl.getShaderParameter(shader, gl.COMPILE_STATUS) ) {
    var info = gl.getShaderInfoLog( shader );
    throw 'Could not compile WebGL program. \n\n' + info;
  }
  return shader;
}
</script>
  
  <!-- Main function contains: 
    1) declaration of WebGL context
    2) function calls to initialize the shader programs
    3) declaration and binding of buffer object
    4) draw functions
  -->
  <script> 
    function main() {
      const canvas = document.querySelector('#output');
      if(!canvas){
        console.log("Canvas element with specified ID ('output') cannot be found.");
      }
//const gl = initWebGL(canvas, true);
      //Setting up the WebGL Context
      const gl = canvas.getContext('webgl2');
      const vertexShaderSource = document.querySelector('#vertex-shader').text;
      const fragmentShaderSource = document.querySelector('#fragment-shader').text;
      const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);
      const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);
      
      //Creation and initialization of GL program 
      var program = gl.createProgram();

      // Attach pre-existing shaders
      gl.attachShader(program, vertexShader);
      gl.attachShader(program, fragmentShader);

      gl.linkProgram(program);

      if ( !gl.getProgramParameter( program, gl.LINK_STATUS) ) {
        var info = gl.getProgramInfoLog(program);
        throw 'Could not compile WebGL program. \n\n' + info;
      }

      // set the program created earlier
      gl.useProgram(program);

      // clear the screen before drawing anything
      gl.clearColor(0.7,0.7,0.7, 1.0); // black - RGBA
      gl.clear(gl.COLOR_BUFFER_BIT); //execute


      // Declaration of pointers to the attributes
      const aPositionPointer = gl.getAttribLocation(program, 'a_position');
      const aPointSizePointer = gl.getAttribLocation(program, 'a_point_size');

     var colorLocation = gl.getUniformLocation(program, "u_color");

    var line_vertices = [
      //front view
      //corner points 4 points
      -0.15, 0.40, 0, 1,
      0.15, 0.40, 0, 1,
      0.15, -0.40, 0, 1,
      -0.15, -0.40, 0, 1,

      //line textures 20 points
      -0.09, 0.40, 0, 1,
      -0.09, 0.32, 0, 1,
      0.09, 0.32, 0, 1,
      0.09, 0.24, 0, 1,
      0.00, 0.24, 0, 1,
      0.00, 0.16, 0, 1,
      -0.09, 0.16, 0, 1,
      -0.09, 0.08, 0, 1,
      0.09, 0.08, 0, 1,
      0.09, 0.0, 0, 1,
      0.00, 0, 0, 1,
      0.00, -0.08, 0, 1,
      -0.09, -0.08, 0, 1,
      -0.09, -0.16, 0, 1,
      0.09, -0.16, 0, 1,
      0.09, -0.24, 0, 1,
      0.00, -0.24, 0, 1,
      0.00, -0.32, 0, 1,
      -0.09, -0.32, 0, 1,
      -0.09, -0.40, 0, 1,

      //log 1 50 points
      -0.15, 0.40, 0, 1,
      -0.15, 0.32, 0, 1,
      0.15, 0.32, 0, 1,
      0.15, 0.40, 0, 1,
      -0.15, 0.40, 0, 1,

      //log 2
      -0.15, 0.32, 0, 1,
      -0.15, 0.24, 0, 1,
      0.15, 0.24, 0, 1,
      0.15, 0.32, 0, 1,
      -0.15, 0.32, 0, 1,

      //log 3
      -0.15, 0.24, 0, 1,
      -0.15, 0.16, 0, 1,
      0.15, 0.16, 0, 1,
      0.15, 0.24, 0, 1,
      -0.15, 0.24, 0, 1,

      //log 4
      -0.15, 0.16, 0, 1,
      -0.15, 0.08, 0, 1,
      0.15, 0.08, 0, 1,
      0.15, 0.16, 0, 1,
      -0.15, 0.16, 0, 1,

      //log 5
      -0.15, 0.08, 0, 1,
      -0.15, 0, 0, 1,
      0.15, 0, 0, 1,
      0.15, 0.08, 0, 1,
      -0.15, 0.08, 0, 1,

      //log 6
      -0.15, 0, 0, 1,
      -0.15, -0.08, 0, 1,
      0.15, -0.08, 0, 1,
      0.15, 0, 0, 1,
      -0.15, 0, 0, 1,

      //log 7
      -0.15, -0.08, 0, 1,
      -0.15, -0.16, 0, 1,
      0.15, -0.16, 0, 1,
      0.15, -0.08, 0, 1,
      -0.15, -0.08, 0, 1,

      //log 8
      -0.15, -0.16, 0, 1,
      -0.15, -0.24, 0, 1,
      0.15, -0.24, 0, 1,
      0.15, -0.16, 0, 1,
      -0.15, -0.16, 0, 1,

      //log 9
      -0.15, -0.24, 0, 1,
      -0.15, -0.32, 0, 1,
      0.15, -0.32, 0, 1,
      0.15, -0.24, 0, 1,
      -0.15, -0.24, 0, 1,

      //log 10
      -0.15, -0.32, 0, 1,
      -0.15, -0.40, 0, 1,
      0.15, -0.40, 0, 1,
      0.15, -0.32, 0, 1,
      -0.15, -0.32, 0, 1,

      //TRIANGULATION
      //topview
      -0.15, 0.40, 0, 1,
      -0.15, -0.40, 0, 1,
      0.15, 0.40, 0, 1,
      0.15, 0.40, 0, 1,
      0.15, -0.40, 0, 1,
      -0.15, -0.40, 0, 1,


      //side view left
      -0.15, 0.40, 0, 1,
      -0.15, 0.40, 0.20, 1,
      -0.15, -0.40, 0.20, 1,

      -0.15, 0.40, 0, 1,
      -0.15, -0.40, 0, 1,
      -0.15, -0.40, 0.20, 1,

      //side view right
      0.15, 0.40, 0, 1,
      0.15, 0.40, 0.20, 1,
      0.15, -0.40, 0.20, 1,

      0.15, 0.40, 0, 1,
      0.15, -0.40, 0, 1,
      0.15, -0.40, 0.20, 1,

      //front view
      -0.15, -0.40, 0.20, 1,
      0.15, -0.40, 0.20, 1,
      0.15, -0.40, 0, 1,

      -0.15, -0.40, 0.20, 1,
      0.15, -0.40, 0.20, 1,
      -0.15, -0.40, 0, 1,

      //back view
      0.15, 0.40, 0.20, 1,
      -0.15, 0.40, 0.20, 1,
      0.15, 0.40, 0, 1,

      0.15, 0.40, 0.20, 1,
      0.15, 0.40, 0, 1,
      -0.15, 0.40, 0, 1,

    ];


      //Buffer object to be accessed by gl.ARRAY_BUFFER

      //create a buffer object
      var shapeBuffer = gl.createBuffer();

      //Bind buffer object to a target
      gl.bindBuffer(gl.ARRAY_BUFFER,shapeBuffer);
      
      //Write data into the buffer object
      gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(line_vertices),gl.STATIC_DRAW);
      
      //Assign the buffer object to an attribute variable
      gl.vertexAttribPointer(aPositionPointer,4,gl.FLOAT,false,0,0);
      //Enable assignment
      gl.enableVertexAttribArray(aPositionPointer);

      gl.uniform4f(colorLocation,0.5215,0.3686,0.2588,1.0);
      gl.drawArrays(gl.TRIANGLES,74,6); //top view

      // draw buffer that is bound to gl.ARRAY_BUFFER
      gl.uniform4f(colorLocation,0,0,0,1.0); //black outline
      
      gl.vertexAttrib1f(aPointSizePointer, 5.0);
      //gl.drawArrays(gl.POINTS,0,4); //corner points
      gl.drawArrays(gl.LINE_LOOP,0,4); //raft perimeter
      gl.drawArrays(gl.LINE_LOOP,24,50); //logs/rows
      gl.drawArrays(gl.LINES,4,20); //line texture

      gl.drawArrays(gl.TRIANGLES,80,6); //side view left
      gl.drawArrays(gl.TRIANGLES,86,6); //side view right
      gl.drawArrays(gl.TRIANGLES,92,6); //front view
      gl.drawArrays(gl.TRIANGLES,98,6); //back view
      
      //unbind the buffer
      gl.bindBuffer(gl.ARRAY_BUFFER, null);
}
    // call the main program
    main();
  </script>
</body>
</html>


